import{c as E,j as e,g as W,h as de,i as ue,r as a,k as be,l as _e,m as xt,P as M,R as Ae,n as Te,o as D,p as ne,B as C,q as Y,t as bt,v as gt,w as wt,x as Q,y as yt,z as St,C as jt,a as Ct,D as Nt,u as kt,E as H}from"./index-CCO05Osv.js";import{C as X}from"./card-BH7rADWj.js";import{C as Ee,B as ie}from"./badge-DXMRhq-p.js";import{s as re,g as Rt}from"./submissionService-CH-aue_8.js";import{A as Pt}from"./arrow-left-C-FxpaIf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=E("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=E("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=E("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=E("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=E("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=E("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=E("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=E("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=E("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=E("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=E("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=E("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=E("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=E("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function Ce({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:W("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}var he="Tabs",[Bt,Lr]=de(he,[ue]),Ie=ue(),[$t,ge]=Bt(he),De=a.forwardRef((t,s)=>{const{__scopeTabs:n,value:l,onValueChange:r,defaultValue:i,orientation:c="horizontal",dir:d,activationMode:o="automatic",...f}=t,u=be(d),[m,h]=_e({prop:l,onChange:r,defaultProp:i??"",caller:he});return e.jsx($t,{scope:n,baseId:xt(),value:m,onValueChange:h,orientation:c,dir:u,activationMode:o,children:e.jsx(M.div,{dir:u,"data-orientation":c,...f,ref:s})})});De.displayName=he;var Me="TabsList",Le=a.forwardRef((t,s)=>{const{__scopeTabs:n,loop:l=!0,...r}=t,i=ge(Me,n),c=Ie(n);return e.jsx(Ae,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:l,children:e.jsx(M.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:s})})});Le.displayName=Me;var ze="TabsTrigger",Fe=a.forwardRef((t,s)=>{const{__scopeTabs:n,value:l,disabled:r=!1,...i}=t,c=ge(ze,n),d=Ie(n),o=Ve(c.baseId,l),f=Oe(c.baseId,l),u=l===c.value;return e.jsx(Te,{asChild:!0,...d,focusable:!r,active:u,children:e.jsx(M.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":f,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:o,...i,ref:s,onMouseDown:D(t.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?c.onValueChange(l):m.preventDefault()}),onKeyDown:D(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&c.onValueChange(l)}),onFocus:D(t.onFocus,()=>{const m=c.activationMode!=="manual";!u&&!r&&m&&c.onValueChange(l)})})})});Fe.displayName=ze;var He="TabsContent",We=a.forwardRef((t,s)=>{const{__scopeTabs:n,value:l,forceMount:r,children:i,...c}=t,d=ge(He,n),o=Ve(d.baseId,l),f=Oe(d.baseId,l),u=l===d.value,m=a.useRef(u);return a.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(ne,{present:r||u,children:({present:h})=>e.jsx(M.div,{"data-state":u?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":o,hidden:!h,id:f,tabIndex:0,...c,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});We.displayName=He;function Ve(t,s){return`${t}-trigger-${s}`}function Oe(t,s){return`${t}-content-${s}`}var qt=De,Ut=Le,Gt=Fe,Xt=We;function Yt({className:t,...s}){return e.jsx(qt,{"data-slot":"tabs",className:W("flex flex-col gap-2",t),...s})}function Kt({className:t,...s}){return e.jsx(Ut,{"data-slot":"tabs-list",className:W("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function ve({className:t,...s}){return e.jsx(Gt,{"data-slot":"tabs-trigger",className:W("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function xe({className:t,...s}){return e.jsx(Xt,{"data-slot":"tabs-content",className:W("flex-1 outline-none",t),...s})}const Jt=a.forwardRef(({height:t=400,initialData:s,onChange:n},l)=>{const r=a.useRef(null),i=a.useRef(null),[c,d]=a.useState(!1),[o,f]=a.useState("#000000"),[u,m]=a.useState(2),[h,v]=a.useState(!1),[p,R]=a.useState(!1),[S,P]=a.useState(t),N=a.useRef({width:0,height:t});a.useEffect(()=>{const b=r.current;if(!b)return;const y=b.getContext("2d");y&&(b.width=b.offsetWidth,b.height=t,y.lineCap="round",y.lineJoin="round",s&&_(s))},[t]);const V=()=>{const b=r.current;return b?b.toDataURL():""},_=b=>{const y=r.current;if(!y)return;const j=y.getContext("2d");if(!j)return;const A=new Image;A.onload=()=>{j.clearRect(0,0,y.width,y.height),j.drawImage(A,0,0)},A.src=b};a.useImperativeHandle(l,()=>({getCanvasData:V,loadCanvasData:_,clear:T}));const U=()=>{n&&n(V())},O=b=>{const y=r.current;if(!y)return{x:0,y:0};const j=y.getBoundingClientRect(),A=b.clientX-j.left,L=b.clientY-j.top,J=y.width/j.width,Z=y.height/j.height;return{x:A*J,y:L*Z}},K=b=>{const y=r.current;if(!y)return;const j=y.getContext("2d");if(!j)return;d(!0);const{x:A,y:L}=O(b);j.beginPath(),j.moveTo(A,L)},B=b=>{if(!c)return;const y=r.current;if(!y)return;const j=y.getContext("2d");if(!j)return;const{x:A,y:L}=O(b);j.strokeStyle=h?"#ffffff":o,j.lineWidth=h?20:u,j.lineTo(A,L),j.stroke()},k=()=>{d(!1),U()},T=()=>{const b=r.current;if(!b)return;const y=b.getContext("2d");y&&(y.clearRect(0,0,b.width,b.height),U())},F=()=>{v(!h)},G=async()=>{const b=i.current;if(b)try{p?document.exitFullscreen&&await document.exitFullscreen():b.requestFullscreen&&await b.requestFullscreen()}catch(y){console.error("Fullscreen error:",y)}};return a.useEffect(()=>{const b=()=>{const y=!!document.fullscreenElement;R(y);const j=r.current;if(!j)return;const A=V();setTimeout(()=>{const L=y?window.innerHeight-100:t,J=j.offsetWidth;J>N.current.width&&(N.current.width=J),L>N.current.height&&(N.current.height=L),P(L);const Z=Math.max(J,N.current.width),oe=Math.max(L,N.current.height);if(j.width!==Z||j.height!==oe){const ae=new Image;ae.onload=()=>{j.width=Z,j.height=oe;const ee=j.getContext("2d");ee&&(ee.lineCap="round",ee.lineJoin="round",ee.drawImage(ae,0,0))},A&&(ae.src=A)}},100)};return document.addEventListener("fullscreenchange",b),()=>{document.removeEventListener("fullscreenchange",b)}},[t]),e.jsxs("div",{ref:i,className:`border rounded-lg p-4 bg-white ${p?"h-screen w-screen":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 flex-wrap",children:[e.jsxs(C,{variant:h?"default":"outline",size:"sm",onClick:F,children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Eraser"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("input",{type:"color",value:o,onChange:b=>f(b.target.value),className:"w-10 h-8 cursor-pointer",disabled:h})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"Width:"}),e.jsx("input",{type:"range",min:"1",max:"10",value:u,onChange:b=>m(Number(b.target.value)),className:"w-24",disabled:h})]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:T,children:[e.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Clear"]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:G,"data-testid":"fullscreen-button",children:[p?e.jsx(Lt,{className:"w-4 h-4 mr-2"}):e.jsx(Mt,{className:"w-4 h-4 mr-2"}),p?"Exit Fullscreen":"Fullscreen"]})]}),e.jsx("canvas",{ref:r,onMouseDown:K,onMouseMove:B,onMouseUp:k,onMouseLeave:k,className:"border border-gray-200 rounded cursor-crosshair w-full",style:{height:`${S}px`,display:"block"},"data-testid":"whiteboard-canvas"})]})});function Qt(){const[t,s]=a.useState("0"),[n,l]=a.useState(null),[r,i]=a.useState(null),[c,d]=a.useState(!0),o=S=>{c?(s(S),d(!1)):s(t==="0"?S:t+S)},f=S=>{n!==null&&r!==null&&!c?u():l(t),i(S),d(!0)},u=()=>{if(n===null||r===null)return;const S=parseFloat(n),P=parseFloat(t);let N=0;switch(r){case"+":N=S+P;break;case"-":N=S-P;break;case"×":N=S*P;break;case"÷":N=S/P;break;default:return}s(N.toString()),l(null),i(null),d(!0)},m=()=>{s("0"),l(null),i(null),d(!0)},h=()=>{c?(s("0."),d(!1)):t.includes(".")||s(t+".")},v=()=>{t.length>1?s(t.slice(0,-1)):(s("0"),d(!0))},p="h-12 text-lg",R="h-12 text-lg bg-blue-500 hover:bg-blue-600 text-white";return e.jsxs(X,{className:"p-4 w-full max-w-xs",role:"region","aria-label":"Calculator",children:[e.jsxs("div",{className:"mb-4 p-3 bg-gray-100 rounded text-right",role:"status","aria-live":"polite",children:[e.jsx("div",{className:"text-sm text-gray-500 h-6","aria-label":"Previous calculation",children:n&&r?`${n} ${r}`:""}),e.jsx("div",{className:"text-2xl break-all","aria-label":"Calculator display",children:t})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",role:"grid","aria-label":"Calculator buttons",children:[e.jsx(C,{variant:"outline",className:p,onClick:m,"aria-label":"Clear all",children:"AC"}),e.jsx(C,{variant:"outline",className:p,onClick:v,"aria-label":"Backspace",children:"←"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>f("÷"),"aria-label":"Divide",children:"÷"}),e.jsx(C,{className:R,onClick:()=>f("×"),"aria-label":"Multiply",children:"×"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("7"),children:"7"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("8"),children:"8"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("9"),children:"9"}),e.jsx(C,{className:R,onClick:()=>f("-"),"aria-label":"Subtract",children:"−"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("4"),"aria-label":"4",children:"4"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("5"),"aria-label":"5",children:"5"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("6"),"aria-label":"6",children:"6"}),e.jsx(C,{className:R,onClick:()=>f("+"),"aria-label":"Add",children:"+"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("1"),children:"1"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("2"),children:"2"}),e.jsx(C,{variant:"outline",className:p,onClick:()=>o("3"),children:"3"}),e.jsx(C,{className:"row-span-2 h-full bg-green-500 hover:bg-green-600 text-white text-lg",onClick:u,"aria-label":"Calculate result",children:"="}),e.jsx(C,{variant:"outline",className:"col-span-2 h-12 text-lg",onClick:()=>o("0"),"aria-label":"0",children:"0"}),e.jsx(C,{variant:"outline",className:p,onClick:h,"aria-label":"Decimal point",children:"."})]})]})}var we="Radio",[Zt,Be]=de(we),[er,tr]=Zt(we),$e=a.forwardRef((t,s)=>{const{__scopeRadio:n,name:l,checked:r=!1,required:i,disabled:c,value:d="on",onCheck:o,form:f,...u}=t,[m,h]=a.useState(null),v=Y(s,S=>h(S)),p=a.useRef(!1),R=m?f||!!m.closest("form"):!0;return e.jsxs(er,{scope:n,checked:r,disabled:c,children:[e.jsx(M.button,{type:"button",role:"radio","aria-checked":r,"data-state":Xe(r),"data-disabled":c?"":void 0,disabled:c,value:d,...u,ref:v,onClick:D(t.onClick,S=>{r||o==null||o(),R&&(p.current=S.isPropagationStopped(),p.current||S.stopPropagation())})}),R&&e.jsx(Ge,{control:m,bubbles:!p.current,name:l,value:d,checked:r,required:i,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});$e.displayName=we;var qe="RadioIndicator",Ue=a.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:l,...r}=t,i=tr(qe,n);return e.jsx(ne,{present:l||i.checked,children:e.jsx(M.span,{"data-state":Xe(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})})});Ue.displayName=qe;var rr="RadioBubbleInput",Ge=a.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:l=!0,...r},i)=>{const c=a.useRef(null),d=Y(c,i),o=bt(n),f=gt(s);return a.useEffect(()=>{const u=c.current;if(!u)return;const m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(o!==n&&v){const p=new Event("click",{bubbles:l});v.call(u,n),u.dispatchEvent(p)}},[o,n,l]),e.jsx(M.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:d,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ge.displayName=rr;function Xe(t){return t?"checked":"unchecked"}var sr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],me="RadioGroup",[nr,zr]=de(me,[ue,Be]),Ye=ue(),Ke=Be(),[ar,or]=nr(me),Je=a.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:l,defaultValue:r,value:i,required:c=!1,disabled:d=!1,orientation:o,dir:f,loop:u=!0,onValueChange:m,...h}=t,v=Ye(n),p=be(f),[R,S]=_e({prop:i,defaultProp:r??null,onChange:m,caller:me});return e.jsx(ar,{scope:n,name:l,required:c,disabled:d,value:R,onValueChange:S,children:e.jsx(Ae,{asChild:!0,...v,orientation:o,dir:p,loop:u,children:e.jsx(M.div,{role:"radiogroup","aria-required":c,"aria-orientation":o,"data-disabled":d?"":void 0,dir:p,...h,ref:s})})})});Je.displayName=me;var Qe="RadioGroupItem",Ze=a.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:l,...r}=t,i=or(Qe,n),c=i.disabled||l,d=Ye(n),o=Ke(n),f=a.useRef(null),u=Y(s,f),m=i.value===r.value,h=a.useRef(!1);return a.useEffect(()=>{const v=R=>{sr.includes(R.key)&&(h.current=!0)},p=()=>h.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",p)}},[]),e.jsx(Te,{asChild:!0,...d,focusable:!c,active:m,children:e.jsx($e,{disabled:c,required:i.required,checked:m,...o,...r,name:i.name,ref:u,onCheck:()=>i.onValueChange(r.value),onKeyDown:D(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:D(r.onFocus,()=>{var v;h.current&&((v=f.current)==null||v.click())})})})});Ze.displayName=Qe;var ir="RadioGroupIndicator",et=a.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...l}=t,r=Ke(n);return e.jsx(Ue,{...r,...l,ref:s})});et.displayName=ir;var lr=Je,cr=Ze,dr=et;function ur({className:t,...s}){return e.jsx(lr,{"data-slot":"radio-group",className:W("grid gap-3",t),...s})}function hr({className:t,...s}){return e.jsx(cr,{"data-slot":"radio-group-item",className:W("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(dr,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(Et,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function mr({options:t,selectedAnswer:s,onAnswerChange:n,disabled:l=!1,showFeedback:r=!1,correctAnswer:i}){const c=o=>r?o===i?"border-green-500 bg-green-50":o===s&&o!==i?"border-red-500 bg-red-50":"":"",d=o=>r?o===i?e.jsx(Ee,{className:"w-5 h-5 text-green-600"}):o===s&&o!==i?e.jsx(Tt,{className:"w-5 h-5 text-red-600"}):null:null;return e.jsx(ur,{value:s,onValueChange:n,disabled:l,children:e.jsx("div",{className:"space-y-3",children:t.map(o=>e.jsx(X,{className:`p-4 cursor-pointer hover:shadow-md transition-all ${c(o.key)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(hr,{value:o.key,id:`option-${o.key}`}),e.jsxs(wt,{htmlFor:`option-${o.key}`,className:"flex-1 cursor-pointer",children:[e.jsxs("span",{className:"font-semibold mr-2",children:[o.key,"."]}),o.text]}),d(o.key)]})},o.key))})})}function fr(t,s){return a.useReducer((n,l)=>s[n][l]??n,t)}var ye="ScrollArea",[tt,Fr]=de(ye),[pr,z]=tt(ye),rt=a.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:l="hover",dir:r,scrollHideDelay:i=600,...c}=t,[d,o]=a.useState(null),[f,u]=a.useState(null),[m,h]=a.useState(null),[v,p]=a.useState(null),[R,S]=a.useState(null),[P,N]=a.useState(0),[V,_]=a.useState(0),[U,O]=a.useState(!1),[K,B]=a.useState(!1),k=Y(s,F=>o(F)),T=be(r);return e.jsx(pr,{scope:n,type:l,dir:T,scrollHideDelay:i,scrollArea:d,viewport:f,onViewportChange:u,content:m,onContentChange:h,scrollbarX:v,onScrollbarXChange:p,scrollbarXEnabled:U,onScrollbarXEnabledChange:O,scrollbarY:R,onScrollbarYChange:S,scrollbarYEnabled:K,onScrollbarYEnabledChange:B,onCornerWidthChange:N,onCornerHeightChange:_,children:e.jsx(M.div,{dir:T,...c,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":V+"px",...t.style}})})});rt.displayName=ye;var st="ScrollAreaViewport",nt=a.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:l,nonce:r,...i}=t,c=z(st,n),d=a.useRef(null),o=Y(s,d,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(M.div,{"data-radix-scroll-area-viewport":"",...i,ref:o,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});nt.displayName=st;var q="ScrollAreaScrollbar",at=a.forwardRef((t,s)=>{const{forceMount:n,...l}=t,r=z(q,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=r,d=t.orientation==="horizontal";return a.useEffect(()=>(d?i(!0):c(!0),()=>{d?i(!1):c(!1)}),[d,i,c]),r.type==="hover"?e.jsx(vr,{...l,ref:s,forceMount:n}):r.type==="scroll"?e.jsx(xr,{...l,ref:s,forceMount:n}):r.type==="auto"?e.jsx(ot,{...l,ref:s,forceMount:n}):r.type==="always"?e.jsx(Se,{...l,ref:s}):null});at.displayName=q;var vr=a.forwardRef((t,s)=>{const{forceMount:n,...l}=t,r=z(q,t.__scopeScrollArea),[i,c]=a.useState(!1);return a.useEffect(()=>{const d=r.scrollArea;let o=0;if(d){const f=()=>{window.clearTimeout(o),c(!0)},u=()=>{o=window.setTimeout(()=>c(!1),r.scrollHideDelay)};return d.addEventListener("pointerenter",f),d.addEventListener("pointerleave",u),()=>{window.clearTimeout(o),d.removeEventListener("pointerenter",f),d.removeEventListener("pointerleave",u)}}},[r.scrollArea,r.scrollHideDelay]),e.jsx(ne,{present:n||i,children:e.jsx(ot,{"data-state":i?"visible":"hidden",...l,ref:s})})}),xr=a.forwardRef((t,s)=>{const{forceMount:n,...l}=t,r=z(q,t.__scopeScrollArea),i=t.orientation==="horizontal",c=pe(()=>o("SCROLL_END"),100),[d,o]=fr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return a.useEffect(()=>{if(d==="idle"){const f=window.setTimeout(()=>o("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(f)}},[d,r.scrollHideDelay,o]),a.useEffect(()=>{const f=r.viewport,u=i?"scrollLeft":"scrollTop";if(f){let m=f[u];const h=()=>{const v=f[u];m!==v&&(o("SCROLL"),c()),m=v};return f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[r.viewport,i,o,c]),e.jsx(ne,{present:n||d!=="hidden",children:e.jsx(Se,{"data-state":d==="hidden"?"hidden":"visible",...l,ref:s,onPointerEnter:D(t.onPointerEnter,()=>o("POINTER_ENTER")),onPointerLeave:D(t.onPointerLeave,()=>o("POINTER_LEAVE"))})})}),ot=a.forwardRef((t,s)=>{const n=z(q,t.__scopeScrollArea),{forceMount:l,...r}=t,[i,c]=a.useState(!1),d=t.orientation==="horizontal",o=pe(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;c(d?f:u)}},10);return se(n.viewport,o),se(n.content,o),e.jsx(ne,{present:l||i,children:e.jsx(Se,{"data-state":i?"visible":"hidden",...r,ref:s})})}),Se=a.forwardRef((t,s)=>{const{orientation:n="vertical",...l}=t,r=z(q,t.__scopeScrollArea),i=a.useRef(null),c=a.useRef(0),[d,o]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=ut(d.viewport,d.content),u={...l,sizes:d,onSizesChange:o,hasThumb:f>0&&f<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:h=>c.current=h};function m(h,v){return jr(h,c.current,d,v)}return n==="horizontal"?e.jsx(br,{...u,ref:s,onThumbPositionChange:()=>{if(r.viewport&&i.current){const h=r.viewport.scrollLeft,v=Ne(h,d,r.dir);i.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:h=>{r.viewport&&(r.viewport.scrollLeft=h)},onDragScroll:h=>{r.viewport&&(r.viewport.scrollLeft=m(h,r.dir))}}):n==="vertical"?e.jsx(gr,{...u,ref:s,onThumbPositionChange:()=>{if(r.viewport&&i.current){const h=r.viewport.scrollTop,v=Ne(h,d);i.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:h=>{r.viewport&&(r.viewport.scrollTop=h)},onDragScroll:h=>{r.viewport&&(r.viewport.scrollTop=m(h))}}):null}),br=a.forwardRef((t,s)=>{const{sizes:n,onSizesChange:l,...r}=t,i=z(q,t.__scopeScrollArea),[c,d]=a.useState(),o=a.useRef(null),f=Y(s,o,i.onScrollbarXChange);return a.useEffect(()=>{o.current&&d(getComputedStyle(o.current))},[o]),e.jsx(lt,{"data-orientation":"horizontal",...r,ref:f,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fe(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),mt(h,m)&&u.preventDefault()}},onResize:()=>{o.current&&i.viewport&&c&&l({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:o.current.clientWidth,paddingStart:ce(c.paddingLeft),paddingEnd:ce(c.paddingRight)}})}})}),gr=a.forwardRef((t,s)=>{const{sizes:n,onSizesChange:l,...r}=t,i=z(q,t.__scopeScrollArea),[c,d]=a.useState(),o=a.useRef(null),f=Y(s,o,i.onScrollbarYChange);return a.useEffect(()=>{o.current&&d(getComputedStyle(o.current))},[o]),e.jsx(lt,{"data-orientation":"vertical",...r,ref:f,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fe(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),mt(h,m)&&u.preventDefault()}},onResize:()=>{o.current&&i.viewport&&c&&l({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:o.current.clientHeight,paddingStart:ce(c.paddingTop),paddingEnd:ce(c.paddingBottom)}})}})}),[wr,it]=tt(q),lt=a.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:l,hasThumb:r,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:o,onDragScroll:f,onWheelScroll:u,onResize:m,...h}=t,v=z(q,n),[p,R]=a.useState(null),S=Y(s,k=>R(k)),P=a.useRef(null),N=a.useRef(""),V=v.viewport,_=l.content-l.viewport,U=Q(u),O=Q(o),K=pe(m,10);function B(k){if(P.current){const T=k.clientX-P.current.left,F=k.clientY-P.current.top;f({x:T,y:F})}}return a.useEffect(()=>{const k=T=>{const F=T.target;(p==null?void 0:p.contains(F))&&U(T,_)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[V,p,_,U]),a.useEffect(O,[l,O]),se(p,K),se(v.content,K),e.jsx(wr,{scope:n,scrollbar:p,hasThumb:r,onThumbChange:Q(i),onThumbPointerUp:Q(c),onThumbPositionChange:O,onThumbPointerDown:Q(d),children:e.jsx(M.div,{...h,ref:S,style:{position:"absolute",...h.style},onPointerDown:D(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),P.current=p.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),B(k))}),onPointerMove:D(t.onPointerMove,B),onPointerUp:D(t.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=N.current,v.viewport&&(v.viewport.style.scrollBehavior=""),P.current=null})})})}),le="ScrollAreaThumb",ct=a.forwardRef((t,s)=>{const{forceMount:n,...l}=t,r=it(le,t.__scopeScrollArea);return e.jsx(ne,{present:n||r.hasThumb,children:e.jsx(yr,{ref:s,...l})})}),yr=a.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:l,...r}=t,i=z(le,n),c=it(le,n),{onThumbPositionChange:d}=c,o=Y(s,m=>c.onThumbChange(m)),f=a.useRef(void 0),u=pe(()=>{f.current&&(f.current(),f.current=void 0)},100);return a.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!f.current){const v=Cr(m,d);f.current=v,d()}};return d(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,d]),e.jsx(M.div,{"data-state":c.hasThumb?"visible":"hidden",...r,ref:o,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:D(t.onPointerDownCapture,m=>{const v=m.target.getBoundingClientRect(),p=m.clientX-v.left,R=m.clientY-v.top;c.onThumbPointerDown({x:p,y:R})}),onPointerUp:D(t.onPointerUp,c.onThumbPointerUp)})});ct.displayName=le;var je="ScrollAreaCorner",dt=a.forwardRef((t,s)=>{const n=z(je,t.__scopeScrollArea),l=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&l?e.jsx(Sr,{...t,ref:s}):null});dt.displayName=je;var Sr=a.forwardRef((t,s)=>{const{__scopeScrollArea:n,...l}=t,r=z(je,n),[i,c]=a.useState(0),[d,o]=a.useState(0),f=!!(i&&d);return se(r.scrollbarX,()=>{var m;const u=((m=r.scrollbarX)==null?void 0:m.offsetHeight)||0;r.onCornerHeightChange(u),o(u)}),se(r.scrollbarY,()=>{var m;const u=((m=r.scrollbarY)==null?void 0:m.offsetWidth)||0;r.onCornerWidthChange(u),c(u)}),f?e.jsx(M.div,{...l,ref:s,style:{width:i,height:d,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function ce(t){return t?parseInt(t,10):0}function ut(t,s){const n=t/s;return isNaN(n)?0:n}function fe(t){const s=ut(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=(t.scrollbar.size-n)*s;return Math.max(l,18)}function jr(t,s,n,l="ltr"){const r=fe(n),i=r/2,c=s||i,d=r-c,o=n.scrollbar.paddingStart+c,f=n.scrollbar.size-n.scrollbar.paddingEnd-d,u=n.content-n.viewport,m=l==="ltr"?[0,u]:[u*-1,0];return ht([o,f],m)(t)}function Ne(t,s,n="ltr"){const l=fe(s),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-r,c=s.content-s.viewport,d=i-l,o=n==="ltr"?[0,c]:[c*-1,0],f=St(t,o);return ht([0,c],[0,d])(f)}function ht(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const l=(s[1]-s[0])/(t[1]-t[0]);return s[0]+l*(n-t[0])}}function mt(t,s){return t>0&&t<s}var Cr=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},l=0;return function r(){const i={left:t.scrollLeft,top:t.scrollTop},c=n.left!==i.left,d=n.top!==i.top;(c||d)&&s(),n=i,l=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(l)};function pe(t,s){const n=Q(t),l=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(l.current),[]),a.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(n,s)},[n,s])}function se(t,s){const n=Q(s);yt(()=>{let l=0;if(t){const r=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(n)});return r.observe(t),()=>{window.cancelAnimationFrame(l),r.unobserve(t)}}},[t,n])}var Nr=rt,kr=nt,Rr=dt;function Pr({className:t,children:s,...n}){return e.jsxs(Nr,{"data-slot":"scroll-area",className:W("relative",t),...n,children:[e.jsx(kr,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),e.jsx(_r,{}),e.jsx(Rr,{})]})}function _r({className:t,orientation:s="vertical",...n}){return e.jsx(at,{"data-slot":"scroll-area-scrollbar",orientation:s,className:W("flex touch-none p-px transition-colors select-none",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(ct,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const Ar=jt("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ke({className:t,variant:s,...n}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:W(Ar({variant:s}),t),...n})}function Re({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:W("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}const Pe={validateAnswer(t,s){var n;if(t.question_type==="multiple_choice"){const l=s.trim().toUpperCase(),r=(n=t.mc_correct_answer)==null?void 0:n.trim().toUpperCase(),i=l===r;return{isCorrect:i,accuracyScore:i?100:0,feedback:i?`Correct! The answer is ${r}.`:`Incorrect. You selected ${l}, but the correct answer is ${r}.`}}return{isCorrect:!1,accuracyScore:0,feedback:"Answer submitted for review."}},getSubmissionStatus(t){return t.accuracyScore===100?"solved":t.accuracyScore>0?"partially_solved":"attempted"}};function Hr(){const t=Ct(),[s]=Nt(),{user:n}=kt(),l=a.useRef(null),[r,i]=a.useState(null),[c,d]=a.useState(null),[o,f]=a.useState(0),[u,m]=a.useState(0),[h,v]=a.useState(!1),[p,R]=a.useState(""),[S,P]=a.useState(""),[N,V]=a.useState(""),[_,U]=a.useState(0),[O,K]=a.useState("whiteboard"),[B,k]=a.useState(!1),[T,F]=a.useState(!0),[G,b]=a.useState(""),[y,j]=a.useState(null),[A,L]=a.useState(!1);a.useEffect(()=>{(async()=>{const w=s.get("problem");if(!w){H.error("No problem selected"),t("/practice");return}try{F(!0);const x=await Rt(w);if(!x){console.error("Problem not found:",w),H.error("Problem not found"),t("/practice");return}d(x);const $={id:x.id,title:x.title,description:x.description,detailedProblem:x.prompt||x.description,difficulty:x.difficulty.charAt(0).toUpperCase()+x.difficulty.slice(1),topic:x.subject,field:x.industry,timeToSolve:x.time_limit_minutes||30,companies:x.companies||[],isFree:!x.is_premium,isStarred:!1,hints:x.hints||[],questionType:x.question_type||"free_text",mcOptions:x.mc_options,mcCorrectAnswer:x.mc_correct_answer};i($);const te=$.timeToSolve*60;if(f(te),m(te),n)try{const I=await re.getUserSubmissionForProblem(n.id,w);I?(console.log("Loading existing submission:",I),I.user_answer&&(x.question_type==="multiple_choice"?b(I.user_answer):R(I.user_answer)),I.notes&&P(I.notes),I.whiteboard_data&&V(I.whiteboard_data)):re.markAsAttempted(w).catch(vt=>{console.error("Failed to mark problem as attempted:",vt)})}catch(I){console.error("Failed to load existing submission:",I)}}catch(x){console.error("Error loading problem:",x),H.error("Failed to load problem"),t("/practice")}finally{F(!1)}})()},[t,n,s]),a.useEffect(()=>{if(h||o<=0||!r)return;const g=setInterval(()=>{f(w=>Math.max(0,w-1))},1e3);return()=>clearInterval(g)},[h,o,r]),a.useEffect(()=>{if(!r||!n)return;const g=setInterval(async()=>{var w;try{const x=Math.round((u-o)/60),$=((w=l.current)==null?void 0:w.getCanvasData())||N,te=r.questionType==="multiple_choice"?G:p;await re.submitAnswer({problem_id:r.id,status:"attempted",user_answer:te,notes:S,whiteboard_data:$,time_spent_minutes:x,hints_used:_}),console.log("Auto-saved progress")}catch(x){console.error("Auto-save failed:",x)}},3e4);return()=>clearInterval(g)},[r,n,p,G,S,N,o,u,_]);const J=g=>{const w=Math.floor(g/60),x=g%60;return`${w}:${x.toString().padStart(2,"0")}`},Z=()=>{r&&_<r.hints.length&&U(_+1)},oe=async()=>{var g;if(!r||!n){H.error("Please log in to save your progress");return}try{const w=Math.round((u-o)/60),x=((g=l.current)==null?void 0:g.getCanvasData())||N,$=r.questionType==="multiple_choice"?G:p;await re.submitAnswer({problem_id:r.id,status:"attempted",user_answer:$,notes:S,whiteboard_data:x,time_spent_minutes:w,hints_used:_}),H.success("Progress saved!")}catch(w){console.error("Error saving progress:",w),H.error("Failed to save progress")}},ae=async()=>{var g;if(confirm("Are you sure you want to skip this problem?")){if(r&&n)try{const w=Math.round((u-o)/60),x=((g=l.current)==null?void 0:g.getCanvasData())||N,$=r.questionType==="multiple_choice"?G:p;await re.submitAnswer({problem_id:r.id,status:"skipped",user_answer:$,notes:S,whiteboard_data:x,time_spent_minutes:w,hints_used:_})}catch(w){console.error("Error saving skip:",w)}t("/practice")}},ee=async()=>{var w;const g=(r==null?void 0:r.questionType)==="multiple_choice"?G:p;if(!g.trim()){H.error("Please select an answer before submitting.");return}if(!r||!n||!c){H.error("Please log in to submit");return}k(!0);try{const x=Pe.validateAnswer(c,g);j(x),L(!0);const $=Pe.getSubmissionStatus(x),te=Math.round((u-o)/60),I=((w=l.current)==null?void 0:w.getCanvasData())||N;await re.submitAnswer({problem_id:r.id,status:$,user_answer:g,accuracy_score:x.accuracyScore,feedback:x.feedback,notes:S,whiteboard_data:I,time_spent_minutes:te,hints_used:_}),x.isCorrect?H.success(x.feedback):H.error(x.feedback),r.questionType!=="multiple_choice"&&setTimeout(()=>t("/practice"),1500)}catch(x){console.error("Error submitting answer:",x),H.error("Failed to submit solution")}finally{k(!1)}},ft=()=>{t("/practice")},pt=()=>{if(!r)return"text-gray-600";const g=o/(r.timeToSolve*60)*100;return g>50?"text-green-600":g>20?"text-yellow-600":"text-red-600"};return T||!r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading problem..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(C,{variant:"ghost",onClick:ft,children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Back to Practice"]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h2",{children:r.title})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>v(!h),children:h?e.jsx(Ht,{className:"w-4 h-4"}):e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-xl ${pt()}`,children:J(o)})]}),e.jsxs(C,{variant:"outline",onClick:oe,children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Save Progress"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(X,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ie,{children:r.difficulty}),e.jsx(ie,{variant:"outline",children:r.topic}),e.jsx(ie,{variant:"outline",children:r.field})]}),e.jsx(Pr,{className:"h-96",children:e.jsx("div",{className:"pr-4 whitespace-pre-wrap",children:r.detailedProblem})})]}),e.jsx(X,{className:"p-6",children:e.jsxs(Yt,{value:O,onValueChange:K,children:[e.jsxs(Kt,{className:"grid w-full grid-cols-3",children:[e.jsx(ve,{value:"whiteboard",children:"Whiteboard"}),e.jsx(ve,{value:"notes",children:"Notes"}),e.jsxs(ve,{value:"calculator",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Calculator"]})]}),e.jsx(xe,{value:"whiteboard",className:"mt-4",children:e.jsx(Jt,{ref:l,height:400,initialData:N,onChange:V})}),e.jsx(xe,{value:"notes",className:"mt-4",children:e.jsx(Ce,{placeholder:"Write your notes, calculations, and working here...",value:S,onChange:g=>P(g.target.value),className:"min-h-[400px] font-mono"})}),e.jsx(xe,{value:"calculator",className:"mt-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(Qt,{})})})]})}),e.jsxs(X,{className:"p-6",children:[e.jsx("h3",{className:"mb-4",children:"Your Answer"}),r.questionType==="multiple_choice"&&r.mcOptions?e.jsxs(e.Fragment,{children:[e.jsx(mr,{options:r.mcOptions,selectedAnswer:G,onAnswerChange:b,disabled:A,showFeedback:A,correctAnswer:A?r.mcCorrectAnswer:void 0}),A&&y&&e.jsx(ke,{className:`mt-4 ${y.isCorrect?"border-green-500 bg-green-50":"border-red-500 bg-red-50"}`,children:e.jsx(Re,{children:y.feedback})})]}):e.jsx(Ce,{placeholder:"Enter your final answer with all calculations and reasoning...",value:p,onChange:g=>R(g.target.value),className:"min-h-[200px] mb-4"}),e.jsx("div",{className:"flex gap-4 mt-4",children:A?e.jsx(C,{onClick:()=>t("/practice"),className:"flex-1",children:"Continue to Next Problem"}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{onClick:ee,className:"flex-1",disabled:B,children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),B?"Submitting...":"Submit Solution"]}),e.jsxs(C,{variant:"outline",onClick:ae,disabled:B,children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Skip Problem"]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(X,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Dt,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h3",{children:"Hints"})]}),e.jsxs("div",{className:"space-y-3",children:[r.hints.map((g,w)=>e.jsx("div",{children:w<_?e.jsxs(ke,{children:[e.jsx(At,{className:"h-4 w-4"}),e.jsxs(Re,{children:[e.jsxs("span",{className:"font-semibold",children:["Hint ",w+1,":"]})," ",g]})]}):w===_?e.jsxs(C,{variant:"outline",className:"w-full",onClick:Z,children:["Reveal Hint ",w+1]}):null},w)),_===r.hints.length&&e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"All hints revealed"})]})]}),r.interviewContext&&e.jsxs(X,{className:"p-6",children:[e.jsx("h3",{className:"mb-4",children:"Interview Context"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Position:"}),e.jsx("p",{children:r.interviewContext.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Interview Round:"}),e.jsx("p",{children:r.interviewContext.round})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Focus Area:"}),e.jsx("p",{children:r.interviewContext.focusArea})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"What They're Evaluating:"}),e.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:r.interviewContext.evaluationCriteria.map((g,w)=>e.jsx("li",{children:g},w))})]})]})]}),r.quickReferences&&r.quickReferences.length>0&&e.jsxs(X,{className:"p-6",children:[e.jsx("h3",{className:"mb-4",children:"Quick References"}),e.jsx("ul",{className:"space-y-2",children:r.quickReferences.map((g,w)=>e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-sm",children:g})},w))})]}),e.jsxs(X,{className:"p-6",children:[e.jsx("h3",{className:"mb-4",children:"Asked At"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.companies.map(g=>e.jsx(ie,{variant:"secondary",children:g},g))})]})]})]})})]})}export{Hr as default};
