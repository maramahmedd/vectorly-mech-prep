import{c as w,j as e,B as L,a as q,u as I,r as n,s as Q,I as R,S,b,d as C,e as M,f as t}from"./index-CCO05Osv.js";import{C as T}from"./card-BH7rADWj.js";import{B as N,C as F}from"./badge-DXMRhq-p.js";import{S as U}from"./star-BTi1jKHG.js";import{C as z,S as i}from"./skeleton-BLvE16zE.js";import{s as G,l as J}from"./submissionService-CH-aue_8.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=w("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=w("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=w("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function Y({problem:s,onContinue:r,onToggleStar:u,isLocked:c,onUpgrade:m}){const f=()=>{if(c)return e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Locked"]});switch(s.status){case"solved":return e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Review"]});case"attempted":return e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Continue"]});default:return"Solve"}},x=()=>s.status==="solved"?"outline":"default",g=j=>{switch(j){case"Easy":return"bg-green-100 text-green-800 border-green-300";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"Hard":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return e.jsxs(T,{className:`p-6 hover:shadow-lg transition-shadow ${c?"opacity-60":""} ${s.status==="solved"?"border-green-500 border-2":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(N,{className:g(s.difficulty),children:s.difficulty}),e.jsx(N,{variant:"outline",children:s.topic}),e.jsx(N,{variant:"outline",children:s.field}),s.status==="solved"&&e.jsxs(N,{className:"bg-green-100 text-green-800 border-green-300",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Solved"]})]}),e.jsx("button",{onClick:()=>u(s.id),className:`transition-colors ${c?"cursor-not-allowed":""}`,disabled:c,children:e.jsx(U,{className:`w-5 h-5 ${s.isStarred?"fill-yellow-400 stroke-yellow-400":"stroke-gray-400"}`})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[s.timeToSolve," min"]})]}),e.jsx("h3",{className:"mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsxs("span",{children:["Asked at: ",s.companies.join(", ")]})]}),e.jsx(L,{onClick:()=>{c&&m?m():r(s.id)},variant:x(),className:"w-full",children:f()})]})}function Z(){return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(i,{className:"h-8 w-48 mb-2"}),e.jsx(i,{className:"h-4 w-full max-w-2xl"})]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx(i,{className:"h-10 w-full"},s))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(s=>e.jsxs(T,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{className:"h-6 w-3/4 mb-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"h-5 w-16 rounded-full"}),e.jsx(i,{className:"h-5 w-20 rounded-full"})]})]}),e.jsx(i,{className:"h-5 w-5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"h-3 w-full"}),e.jsx(i,{className:"h-3 w-5/6"}),e.jsx(i,{className:"h-3 w-4/6"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-4 w-4 rounded-full"}),e.jsx(i,{className:"h-3 w-16"})]}),e.jsx(i,{className:"h-3 w-20"})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3].map(r=>e.jsx(i,{className:"h-6 w-16 rounded-full"},r))}),e.jsx(i,{className:"h-10 w-full"})]},s))})]})})}function ee(s,r=!1,u="not_started"){const c={easy:"Easy",medium:"Medium",hard:"Hard"};return{id:s.id,title:s.title,description:s.description,detailedProblem:s.prompt||s.description,difficulty:c[s.difficulty]||"Medium",topic:s.subject,field:s.industry,timeToSolve:s.time_limit_minutes||30,companies:s.companies||[],isFree:!s.is_premium,isStarred:r,hints:s.hints||[],status:u}}function ce(){const s=q(),{user:r}=I(),[u,c]=n.useState([]),[m,f]=n.useState([]),[x,g]=n.useState(!0),[j,E]=n.useState(""),[v,A]=n.useState("all"),[p,B]=n.useState("all"),[y,_]=n.useState("all"),[k,P]=n.useState(new Set);n.useEffect(()=>{const l=async()=>{if(!r){f([]);return}try{const a=await G.getUserSubmissions(r.id);f(a)}catch(a){console.error("Error fetching submissions:",a)}};l();let o=null;return r&&(o=Q.channel(`ui-updates-${r.id}`,{config:{broadcast:{self:!1}}}).on("broadcast",{event:"attempts_changed"},a=>{var h;((h=a==null?void 0:a.payload)==null?void 0:h.userId)===r.id&&l()}).subscribe()),()=>{o&&o.unsubscribe()}},[r]),n.useEffect(()=>{let l=!1;return(async()=>{try{g(!0);const a=await J({search:j,difficulty:v==="all"?void 0:v.toLowerCase(),subject:y==="all"?void 0:y,industry:p==="all"?void 0:p});if(!l){const h=new Map;m.forEach(d=>{d.status==="solved"?h.set(d.problem_id,"solved"):(d.status==="attempted"||d.status==="partially_solved")&&h.set(d.problem_id,"attempted")});const D=a.map(d=>ee(d,k.has(d.id),h.get(d.id)||"not_started"));c(D)}}catch(a){console.error("Error fetching problems:",a)}finally{l||g(!1)}})(),()=>{l=!0}},[j,v,y,p,k,m]);const V=l=>{s(`/practice/interface?problem=${l}`)},$=l=>{P(o=>{const a=new Set(o);return a.has(l)?a.delete(l):a.add(l),a}),c(o=>o.map(a=>a.id===l?{...a,isStarred:!a.isStarred}:a))},H=()=>{s("/upgrade")};return x?e.jsx(Z,{}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2",children:"Practice Problems"}),e.jsx("p",{className:"text-gray-600",children:"Master engineering fundamentals through real interview questions from top companies"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(R,{type:"text",placeholder:"Search problems...",value:j,onChange:l=>E(l.target.value),className:"pl-10"})]}),e.jsxs(S,{value:v,onValueChange:A,children:[e.jsx(b,{children:e.jsx(C,{placeholder:"Difficulty"})}),e.jsxs(M,{children:[e.jsx(t,{value:"all",children:"All Difficulties"}),e.jsx(t,{value:"Easy",children:"Easy"}),e.jsx(t,{value:"Medium",children:"Medium"}),e.jsx(t,{value:"Hard",children:"Hard"})]})]}),e.jsxs(S,{value:p,onValueChange:B,children:[e.jsx(b,{children:e.jsx(C,{placeholder:"Field"})}),e.jsxs(M,{children:[e.jsx(t,{value:"all",children:"All Fields"}),e.jsx(t,{value:"Mechanical",children:"Mechanical"}),e.jsx(t,{value:"Electrical",children:"Electrical"}),e.jsx(t,{value:"Civil",children:"Civil"}),e.jsx(t,{value:"Architecture",children:"Architecture"}),e.jsx(t,{value:"Chemical",children:"Chemical"}),e.jsx(t,{value:"Aerospace",children:"Aerospace"})]})]}),e.jsxs(S,{value:y,onValueChange:_,children:[e.jsx(b,{children:e.jsx(C,{placeholder:"Topic"})}),e.jsxs(M,{children:[e.jsx(t,{value:"all",children:"All Topics"}),e.jsx(t,{value:"Solid Mechanics",children:"Solid Mechanics"}),e.jsx(t,{value:"Thermodynamics",children:"Thermodynamics"}),e.jsx(t,{value:"Fluid Mechanics",children:"Fluid Mechanics"}),e.jsx(t,{value:"Heat Transfer",children:"Heat Transfer"}),e.jsx(t,{value:"Circuits",children:"Circuits"}),e.jsx(t,{value:"Structures",children:"Structures"}),e.jsx(t,{value:"Materials",children:"Materials"})]})]})]}),e.jsx("div",{className:"mb-4 text-gray-600",children:x?"Loading...":`Showing ${u.length} problems`}),x?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-black"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(l=>e.jsx(Y,{problem:l,onContinue:V,onToggleStar:$,isLocked:!l.isFree,onUpgrade:H},l.id))}),u.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No problems found matching your filters. Try adjusting your search criteria."})]})]})})}export{ce as default};
